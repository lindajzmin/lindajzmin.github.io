<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Capítulo 3: Estadística descriptiva</title>
    <meta charset="utf-8" />
    <meta name="author" content="LINDA CABRERA ORELLANA FERNANDA JURADO MANTILLA" />
    <script src="libs/header-attrs-2.17/header-attrs.js"></script>
    <link href="libs/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.6/tile-view.js"></script>
    <script src="libs/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon-1.4.1/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon-1.4.1/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain-0.2.6/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain-0.2.6/shareagain.js"></script>
    <link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
    <script src="libs/panelset-0.2.6/panelset.js"></script>
    <link rel="stylesheet" href="theme-masapp.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





class: center, middle, titular
background-size: contain

&lt;img style="border-radius: 50%;" src="img/masapp.jpg" width="250px"/&gt;
# Capítulo 3: Estadística descriptiva 
## **CAPACITACIÓN**
#### LINDA CABRERA ORELLANA&lt;br&gt;FERNANDA JURADO MANTILLA
#### Noviembre, 2022

---



# Contenido del Capítulo 3


- Bases de Estadística

- Estadística Descriptiva Univariada
   * Medidas de tendencia central
   * Medidas de posición
   * Medidas de dispersión
   * Frecuencias
   * Distribución de frecuencias

- Estadística Descriptiva Multivariada
   * Tablas de contingencia
   * Gráfico de interacción
   * Coeficiente de correlación de Pearson
   * Matriz de correlación


---

## Paquetes a utilizar

* <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M374.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 178.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l80 80c12.5 12.5 32.8 12.5 45.3 0l160-160zm96 128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7 86.6 297.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l256-256z"/></svg> `library(tidyverse)`

   * <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg> `library(readr)`
   
   * <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg> `library(dplyr)`
   
   * <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg> `library(ggplot2)`

* <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M374.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 178.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l80 80c12.5 12.5 32.8 12.5 45.3 0l160-160zm96 128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7 86.6 297.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l256-256z"/></svg> `library(magrittr)`

* <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M374.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 178.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l80 80c12.5 12.5 32.8 12.5 45.3 0l160-160zm96 128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7 86.6 297.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l256-256z"/></svg> `library(modeest)`

* <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M374.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 178.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l80 80c12.5 12.5 32.8 12.5 45.3 0l160-160zm96 128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7 86.6 297.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l256-256z"/></svg> `library(fdth)`

* <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M374.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 178.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l80 80c12.5 12.5 32.8 12.5 45.3 0l160-160zm96 128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7 86.6 297.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l256-256z"/></svg> `library(GGally)`




---

class: middle, center, inverse

<svg aria-hidden="true" role="img" viewBox="0 0 384 512" style="height:3em;width:2.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM80 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H80c-8.8 0-16-7.2-16-16s7.2-16 16-16zm54.2 253.8c-6.1 20.3-24.8 34.2-46 34.2H80c-8.8 0-16-7.2-16-16s7.2-16 16-16h8.2c7.1 0 13.3-4.6 15.3-11.4l14.9-49.5c3.4-11.3 13.8-19.1 25.6-19.1s22.2 7.7 25.6 19.1l11.6 38.6c7.4-6.2 16.8-9.7 26.8-9.7c15.9 0 30.4 9 37.5 23.2l4.4 8.8H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H240c-6.1 0-11.6-3.4-14.3-8.8l-8.8-17.7c-1.7-3.4-5.1-5.5-8.8-5.5s-7.2 2.1-8.8 5.5l-8.8 17.7c-2.9 5.9-9.2 9.4-15.7 8.8s-12.1-5.1-13.9-11.3L144 349l-9.8 32.8z"/></svg>
# Bases de Estadística


---

background-color: var(--azul-claro)
class: middle, center, inverse

&lt;img style="border-radius: 50%;" src="https://openseauserdata.com/files/8a93e86385d6b61dc04ba0b34e393246.jpg" width="350px"/&gt;

&gt; "No entiendes realmente algo a menos que
seas capaz de explicarlo."
&gt; &lt;footer&gt;ALBERT EINSTEIN&lt;/footer&gt;


---

## Análisis estadístico de datos

&lt;br&gt;

&gt; "La estadística estudia los métodos científicos para recoger, organizar, resumir y analizar datos así como para obtener conclusiones válidas y tomar decisiones razonables basadas en tal análisis."
&gt; &lt;footer&gt;Murray y Spiegel&lt;/footer&gt;

&lt;br&gt;

.pull-left[

**Estadística descriptiva o deductiva**

Conjunto de técnicas que se utilizan con el objetivo de resumir, representar y explicar los datos concretos de los que disponemos.
]

.pull-right[

**Estadística inferencial o inductiva**

Conjunto de técnicas que se utilizan con el objetivo de deducir (inferir), a partir de los datos, información significativa sobre el total de la población o de las poblaciones de interés.
]


---

## Estadística Descriptiva

Según el número de variables que atiende el análisis podemos dividir la Estadística descriptiva en Univariada y Multivariada.

**Estadística Descriptiva Univariada:** incluye todas las técnicas que hacen referencia a la descripción de una sola variable.

**Estadística Descriptiva Multivariada:** incluye todas las técnicas que hacen referencia a la descripción de dos o más variables.

---

class: middle, center, inverse

<svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:3em;width:3.38em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M309.6 158.5L332.7 19.8C334.6 8.4 344.5 0 356.1 0c7.5 0 14.5 3.5 19 9.5L392 32h52.1c12.7 0 24.9 5.1 33.9 14.1L496 64h56c13.3 0 24 10.7 24 24v24c0 44.2-35.8 80-80 80H464 448 426.7l-5.1 30.5-112-64zM416 256.1L416 480c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V364.8c-24 12.3-51.2 19.2-80 19.2s-56-6.9-80-19.2V480c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V249.8c-28.8-10.9-51.4-35.3-59.2-66.5L1 167.8c-4.3-17.1 6.1-34.5 23.3-38.8s34.5 6.1 38.8 23.3l3.9 15.5C70.5 182 83.3 192 98 192h30 16H303.8L416 256.1zM464 80c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16z"/></svg>
# Estadística Descriptiva Univariada


---

## Medidas de Tendencia Central

Una medida de tendencia central es un valor que indica el centro de un conjunto de elementos para describir características de centralidad.


|  Estadístico          |     ¿Qué calcula?    |  Función en R         |
|:----------------------|:---------------------|----------------------:|
| Media aritmética  |   El promedio de los datos. La suma de los elementos dividida por el número de elementos |  `mean(x, na.rm=TRUE)`  |
| Media acotada |  El promedio de los datos removiendo un porcentaje de valores extremos |  `mean(x, na.rm= TRUE, trim=value)`  |
| Mediana  | Punto medio de los valores ordenados de menor a mayor o de mayor a menor representando el 50% de los datos |  `median(x, na.rm= TRUE)`  |
| Moda | Valor que aparece con mayor frecuencia  | `mlv(x)` |



---

## Medidas de Tendencia Central

Calcular las medidas de Tendencia central para la data de `ventas` de la columna del `Total de Ventas`:





```r
## Media aritmética
mean(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 2728614
```


```r
## Media acotada
mean(ventas$TOTAL_VENTAS, na.rm = TRUE, trim=0.01)
## [1] 730742.7
```


```r
## Mediana
median(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 12639.9
```

---

## Medidas de Tendencia Central

Calcular las medidas de Tendencia central para la data de `ventas` de la columna del `Total de Ventas`:



```r
## Cargar paquete
library(modeest)
## Registered S3 method overwritten by 'rmutil':
##   method         from
##   print.response httr

## Moda
mlv(ventas$TOTAL_VENTAS)
## [1] 2130.266
```


---

## Medidas de Posición

Una medida de posición es el valor que permite dividir el conjunto de datos en partes porcentuales iguales y se usan para clasificar una observación dentro de una población o muestra.


|  Estadístico          |     ¿Qué calcula?    |  Función en R         |
|:----------------------|:---------------------|----------------------:|
| Mínimo  |   El valor menor de todo el conjunto de datos |  `min(x, na.rm=TRUE)`  |
| Máximo |  El valor mayor de todo el conjunto de datos |  `max(x, na.rm= TRUE)`  |
| Cuartiles  | Dividen al conjunto de observaciones en **4** partes iguales | `quantile(x , probs = 0.75)`  |
| Deciles | Dividen al conjunto de observaciones en **10** partes iguales  | `quantile(x , probs = 0.3)` |
| Centiles | Dividen al conjunto de observaciones en **100** partes iguales  | `quantile(x, probs = 0.72)` |



---

## Medidas de Posición

Entendiendo las medidas de posición:

&lt;img src="img/posicion.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## Medidas de Posición

Calcular las medidas de Posición para la data de `ventas` de la columna del `Total de Ventas`:


```r
## Mínimo
min(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 0
```


```r
## Máximo
max(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 1940601690
```


```r
## Cuartiles
quantile(ventas$TOTAL_VENTAS, probs = c(0.25, 0.50, 0.75))
##      25%      50%      75% 
##    390.0  12639.9 145504.5
```


---


## Medidas de Posición

Calcular las medidas de Posición para la data de `ventas` de la columna del `Total de Ventas`:


```r
## para valores muy grandes
options(scipen=3)

## Deciles
quantile(ventas$TOTAL_VENTAS, probs = seq(from = 0.1, to = 1, by = 0.1))
##           10%           20%           30%           40%           50% 
##          0.00         10.80       1035.00       4325.87      12639.90 
##           60%           70%           80%           90%          100% 
##      32250.67      85341.63     264297.07    1349457.88 1940601689.88
```


```r
## Centil 22% y 67%
quantile(ventas$TOTAL_VENTAS, probs = c(0.22, 0.67))
##      22%      67% 
##   108.55 63226.62
```


---

## Medidas de Dispersión

Según la definición de la media, ésta no facilita información de cómo están situados todos los casos respecto de ella, pueden coincidir todos con la media y entonces no sería una variable, sería una constante, pueden estar próximos a la media y entonces ésta se consideraría representativa o pueden estar muy alejados. Con las **medidas de dispersión** se obtiene información de cómo están situados los casos respecto a un estadístico de tendencia central, normalmente, la _media_.

&lt;br&gt;

|  Estadístico          |     ¿Qué calcula?    |  Función en R         |
|:----------------------|:---------------------|----------------------:|
| Varianza  |  Mide la distancia de todos los casos respecto a la media aritmética |  `var(x, na.rm=TRUE)`  |
| Desviación Estándar | Raíz cuadrada de la varianza |  `sd(x, na.rm= TRUE)`  |
| Rango Intercuartil  | Distancia entre el cuartil **1** y **3** | `IQR(x , na.rm=TRUE)`  |
| Rango | Diferencia entre máximo y mínimo valor  | `diff(range(x , na.rm=TRUE))` |


---

## Medidas de Dispersión

Calcular las medidas de Dispersión para la data de `ventas` de la columna del `Total de Ventas`:


```r
## Varianza
var(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 1.322621e+15
```


```r
## Desviación Estándar
sd(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 36367852
```


```r
## Rango Intercuartil
IQR(ventas$TOTAL_VENTAS, na.rm = TRUE)
## [1] 145114.5
```


```r
## Rango
diff(range(ventas$TOTAL_VENTAS, na.rm = TRUE))
## [1] 1940601690
```


---

## Frecuencias


Para obtener las frecuencias simples de una variable (cuantitativa o cualitativa) puede utilizarse la función `table()` en caso de frecuencias absolutas y `prop.table()` para las relativas. 

Es importante mencionar que la función `prop.table()` no se ejecuta en forma directa sobre la variable, sino sobre una tabla de frecuencias absolutas creada previamente mediante la función `table()`.



```r
## Frecuencias absolutas de observaciones por provincia
table(ventas$provincia)

## Frecuencias relativas de observaciones por provincia
round(prop.table(table(ventas$provincia)),2)
```

---

## Distribución de frecuencias

Para distribuciones de variables continuas puede utilizarse la función `fdt()` de la librería `fdth`. Los argumentos principales son:

* `x` el conjunto de datos,

* `k` el número de clases o intervalos, 

* `star` el límite inferior de la primera clase o intervalo de la distribución, 

* `end` el límite superior de la última clase o intervalo de la distribución, 

* `h` es el ancho del intervalo de la distribución.

* `breaks` método utilizado para determinar el número de clases. Estos métodos son Sturges, Scott o FD,

* `right` define los intervalos de clase abiertos en el límite superior (por defecto: right = FALSE).


---

## Distribución de frecuencias

Entendiendo las distribuciones de frecuencias:

&lt;img src="img/frec.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## Distribución de frecuencias

Obtenga la distribucíon de transacciones de `ventas` según las ventas totales que inicie en `\(0\)`, finalice en `\(1800000000\)` y el ancho de cada intervalo sea `\(150000000\)`.


```r
library(fdth)
```


```r
dist &lt;- fdt(ventas$TOTAL_VENTAS, start = 0, end = 1800000000, h = 150000000)
dist
##             Class limits     f rf rf(%)    cf cf(%)
##            [0,150000000) 36171  1 99.72 36171 99.72
##    [150000000,300000000)    52  0  0.14 36223 99.87
##    [300000000,450000000)    15  0  0.04 36238 99.91
##    [450000000,600000000)     6  0  0.02 36244 99.93
##    [600000000,750000000)     5  0  0.01 36249 99.94
##    [750000000,900000000)     9  0  0.02 36258 99.96
##   [900000000,1050000000)     2  0  0.01 36260 99.97
##  [1050000000,1200000000)     3  0  0.01 36263 99.98
##  [1200000000,1350000000)     1  0  0.00 36264 99.98
##  [1350000000,1500000000)     0  0  0.00 36264 99.98
##  [1500000000,1650000000)     0  0  0.00 36264 99.98
##  [1650000000,1800000000)     1  0  0.00 36265 99.98
```

---

## Distribución de frecuencias

Luego de eliminar outliers. Obtenga la distribucíon de transacciones de `ventas` según las ventas totales que tenga 4 intervalos de clase.





```r
dist &lt;- fdt(ventas$TOTAL_VENTAS, k=4)
dist
##                   Class limits     f rf rf(%)    cf  cf(%)
##               [0,221595695.52) 33382  1 99.81 33382  99.81
##    [221595695.52,443191391.04)    42  0  0.13 33424  99.94
##   [443191391.04,664787086.559)     8  0  0.02 33432  99.96
##  [664787086.559,886382782.079)    13  0  0.04 33445 100.00
```


---

class: middle, center, inverse

<svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:3em;width:3.38em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M309.6 158.5L332.7 19.8C334.6 8.4 344.5 0 356.1 0c7.5 0 14.5 3.5 19 9.5L392 32h52.1c12.7 0 24.9 5.1 33.9 14.1L496 64h56c13.3 0 24 10.7 24 24v24c0 44.2-35.8 80-80 80H464 448 426.7l-5.1 30.5-112-64zM416 256.1L416 480c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V364.8c-24 12.3-51.2 19.2-80 19.2s-56-6.9-80-19.2V480c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V249.8c-28.8-10.9-51.4-35.3-59.2-66.5L1 167.8c-4.3-17.1 6.1-34.5 23.3-38.8s34.5 6.1 38.8 23.3l3.9 15.5C70.5 182 83.3 192 98 192h30 16H303.8L416 256.1zM464 80c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16z"/></svg> <svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:3em;width:3.38em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M309.6 158.5L332.7 19.8C334.6 8.4 344.5 0 356.1 0c7.5 0 14.5 3.5 19 9.5L392 32h52.1c12.7 0 24.9 5.1 33.9 14.1L496 64h56c13.3 0 24 10.7 24 24v24c0 44.2-35.8 80-80 80H464 448 426.7l-5.1 30.5-112-64zM416 256.1L416 480c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V364.8c-24 12.3-51.2 19.2-80 19.2s-56-6.9-80-19.2V480c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V249.8c-28.8-10.9-51.4-35.3-59.2-66.5L1 167.8c-4.3-17.1 6.1-34.5 23.3-38.8s34.5 6.1 38.8 23.3l3.9 15.5C70.5 182 83.3 192 98 192h30 16H303.8L416 256.1zM464 80c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16z"/></svg> <svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:3em;width:3.38em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M309.6 158.5L332.7 19.8C334.6 8.4 344.5 0 356.1 0c7.5 0 14.5 3.5 19 9.5L392 32h52.1c12.7 0 24.9 5.1 33.9 14.1L496 64h56c13.3 0 24 10.7 24 24v24c0 44.2-35.8 80-80 80H464 448 426.7l-5.1 30.5-112-64zM416 256.1L416 480c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V364.8c-24 12.3-51.2 19.2-80 19.2s-56-6.9-80-19.2V480c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V249.8c-28.8-10.9-51.4-35.3-59.2-66.5L1 167.8c-4.3-17.1 6.1-34.5 23.3-38.8s34.5 6.1 38.8 23.3l3.9 15.5C70.5 182 83.3 192 98 192h30 16H303.8L416 256.1zM464 80c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16z"/></svg>
# Estadística Descriptiva Multivariada


---

## Tablas de Contingencia

Es una tabulación cruzada que muestra la distribución de frecuencia de dos variables categóricas de interés (mide la ocurrencia).

Entendiendo las tablas de contingencia:

&lt;img src="img/contingencia.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## Tablas de Contingencia


Haremos una pre-selección de los datos para ejemplificar una tabla de contingencia, limitando a las provincias de Pichincha, Guayas y Azuay.



```r
## Pre-selección de datos
tablacont &lt;- ventas %&gt;%
    filter(provincia=="PICHINCHA" | provincia=="GUAYAS" | provincia== "AZUAY")
```


Construimos la tabla de contingencia con `table()`.


```r
## Tabla de contingencia - Provincia
table(tablacont$provincia, tablacont$mes)
##            
##             Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic
##   AZUAY     231 231 227 222 222 246 224 218 217   0   0   0
##   GUAYAS    439 441 440 435 434 459 430 419 412   0   0   0
##   PICHINCHA 157 154 152 153 154 159 152 149 149   0   0   0
```

---

## Tablas de Contingencia

Construimos la tabla de contingencia con `table()` y agregamos los márgenes con `addmargins()`.


```r
## Tabla de contingencia – Con los márgenes
tb_tablacont &lt;- table(tablacont$provincia, tablacont$mes)
tb_tablacont
##            
##             Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic
##   AZUAY     231 231 227 222 222 246 224 218 217   0   0   0
##   GUAYAS    439 441 440 435 434 459 430 419 412   0   0   0
##   PICHINCHA 157 154 152 153 154 159 152 149 149   0   0   0

addmargins(tb_tablacont)
##            
##              Ene  Feb  Mar  Abr  May  Jun  Jul  Ago  Sep  Oct  Nov  Dic  Sum
##   AZUAY      231  231  227  222  222  246  224  218  217    0    0    0 2038
##   GUAYAS     439  441  440  435  434  459  430  419  412    0    0    0 3909
##   PICHINCHA  157  154  152  153  154  159  152  149  149    0    0    0 1379
##   Sum        827  826  819  810  810  864  806  786  778    0    0    0 7326
```

---

## Tablas de Contingencia

Construimos la tabla de contingencia con porcentajes con `prop.table()` y agregamos los márgenes con `addmargins()`.


```r
## Tabla de contingencia - Porcentajes
tb_tablacont_rel &lt;- prop.table(tb_tablacont)
round(addmargins(tb_tablacont_rel)*100,2)
##            
##                Ene    Feb    Mar    Abr    May    Jun    Jul    Ago    Sep
##   AZUAY       3.15   3.15   3.10   3.03   3.03   3.36   3.06   2.98   2.96
##   GUAYAS      5.99   6.02   6.01   5.94   5.92   6.27   5.87   5.72   5.62
##   PICHINCHA   2.14   2.10   2.07   2.09   2.10   2.17   2.07   2.03   2.03
##   Sum        11.29  11.27  11.18  11.06  11.06  11.79  11.00  10.73  10.62
##            
##                Oct    Nov    Dic    Sum
##   AZUAY       0.00   0.00   0.00  27.82
##   GUAYAS      0.00   0.00   0.00  53.36
##   PICHINCHA   0.00   0.00   0.00  18.82
##   Sum         0.00   0.00   0.00 100.00
```


---

## Gráfico de interacción

.panelset[
.panel[.panel-name[¿Qué es?]
Permite relacionar dos variables cualitativas y una cuantitativa.

Los **gráficos de interacción** sirven para comparar las medias en el modelo. Un gráfico de interacción es un gráfico de líneas en el que cada punto indica la media estimada de una variable pudiéndose observar cómo se relacionan con dos variables cualitativas.
]

.panel[.panel-name[Código]

```r
## Pre-selecciono mi data ventas
graf_int &lt;- ventas %&gt;% 
    filter(sector=="ACTIVIDADES FINANCIERAS Y DE SEGUROS." |
               sector=="INDUSTRIAS MANUFACTURERAS." |
               sector=="COMERCIO AL POR MAYOR Y AL POR MENOR; REPARACIÓN DE VEHÍCULOS AUTOMOTORES Y MOTOCICLETAS.")
```


```r
## Gráfico de interacción
with(graf_int,
     interaction.plot(mes, sector, TOTAL_VENTAS))
```
]

.panel[.panel-name[Gráfico de interacción]
![](3_estadistica_descriptiva_files/figure-html/gi3-1.png)&lt;!-- --&gt;
]]

---

## Gráfico de interacción

.panelset[
.panel[.panel-name[Código]

```r
## Modifico la leyenda
graf_int &lt;- graf_int %&gt;% 
    mutate(sector2 = case_when(sector=="ACTIVIDADES FINANCIERAS Y DE SEGUROS." ~ "Act. Financieras y Seguros",
                               sector=="INDUSTRIAS MANUFACTURERAS." ~ "Ind. Manufactureras",
                               sector=="COMERCIO AL POR MAYOR Y AL POR MENOR; REPARACIÓN DE VEHÍCULOS AUTOMOTORES Y MOTOCICLETAS." ~ "Comercio al por mayor y menor"))
```


```r
## Gráfico de interacción
with(graf_int,
     interaction.plot(mes, sector2, TOTAL_VENTAS,
                      xlab = "2022", 
                      ylab = "Promedio de ventas tarifa 12%",
                      trace.label = "Sector económico",
                      col = c("tomato3", "violetred", "turquoise"),
                      lwd = 3,
                      legend = T),
     legend(xjust = 1, yjust = 1)
     )
```
]

.panel[.panel-name[Gráfico de interacción]

![](3_estadistica_descriptiva_files/figure-html/gi6-1.png)&lt;!-- --&gt;

]]

---

## Coeficiente de Correlación de Pearson

El coeficiente de correlación de Pearson es un índice que puede utilizarse para medir el grado de relación de dos variables siempre y cuando ambas sean cuantitativas y continuas.

El valor del índice de correlación denotado por `\(r_{xy}\)` varía en el intervalo `\([-1,1]\)`. El signo indica el sentido de la relación:

- Si `\(r=1\)`, existe una correlación positiva perfecta. El índice indica una dependencia total entre las dos variables denominada relación directa: cuando una de ellas aumenta, la otra también lo hace en proporción constante.

- Si `\(0&lt;r&lt;1\)` entonces existe una correlación positiva.

- Si `\(r=0\)` entonces no existe relación lineal pero esto no necesariamente implica que las variables son independientes: pueden existir todavía relaciones no lineales entre las dos variables.

- Si `\(-1&lt;r&lt;0\)`, existe una correlación negativa.

- Si `\(r=-1\)`, existe una correlación negativa perfecta. El índice indica una dependencia total entre las dos variables llamada relación opuesta: cuando una de ellas aumenta, la otra cambia su signo en proporción constante.


---

## Coeficiente de Correlación de Pearson

&lt;br&gt;

&lt;img src="img/pearson.png" width="100%" style="display: block; margin: auto;" /&gt;


---

## Coeficiente de Correlación de Pearson

Calculamos la correlación entre dos variables numéricas continuas con `cor()`.


```r
## Coeficiente de Correlacion
cor(ventas$TOTAL_VENTAS, ventas$TOTAL_COMPRAS)
## [1] 0.8157537
```

Se puede ver que existe una alta correlación positiva entre lo reportado por concepto de ventas y las compras, ojo, **esto no implica que mayores ventas causa mayores compras**.


---

## Coeficiente de Correlación de Pearson

.panelset[
.panel[.panel-name[Código]
Gráfico de dispersión para explorar relación entre variables cuantitativa


```r
## Explorar variables
ggplot(ventas, aes(TOTAL_VENTAS, TOTAL_COMPRAS)) +
    geom_point()
```
]

.panel[.panel-name[Gráfico de dispersión]
![](3_estadistica_descriptiva_files/figure-html/cp4-1.png)&lt;!-- --&gt;
]]


---

## Matriz de Correlación

Matriz que resume la correlación de varias variables.

&lt;img src="img/matriz.png" width="80%" style="display: block; margin: auto;" /&gt;


---

## Matriz de Correlación

Genero la matriz de correlación seleccionando solo las variables numéricas y aplicando `cor()`.


```r
## Matriz que resume la correlación de varias variables numéricas
## Deselecciono Total de ventas, Total de Compras y Compras RISE
matrix_cor &lt;- ventas %&gt;%
    select(-TOTAL_VENTAS, -TOTAL_COMPRAS, -COMPRAS_RISE) %&gt;% 
    select_if(is.numeric) %&gt;% cor()


## Genero la matriz de correlación
round(matrix_cor, 2)
##               VN_tar12 VN_tar0 EXPORTACIONES CN_tar12 CN_tar0 IMPORTACIONES
## VN_tar12          1.00    0.24          0.14     0.21    0.23          0.26
## VN_tar0           0.24    1.00          0.46     0.81    0.93          0.79
## EXPORTACIONES     0.14    0.46          1.00     0.48    0.57          0.38
## CN_tar12          0.21    0.81          0.48     1.00    0.80          0.89
## CN_tar0           0.23    0.93          0.57     0.80    1.00          0.76
## IMPORTACIONES     0.26    0.79          0.38     0.89    0.76          1.00
```


---

## Matriz de Correlación

.panelset[
.panel[.panel-name[Mapa de calor]
.pull-left[

```r
## Mapa de Calor
heatmap(matrix_cor, 
        col = gray(seq(1, 0, length = 16)))
```
]
.pull-right[
![](3_estadistica_descriptiva_files/figure-html/mc4-1.png)&lt;!-- --&gt;
]
]

.panel[.panel-name[Gráfica de correlación]
.pull-left[

```r
# Activar paquete GGally
library(GGally)
## Registered S3 method overwritten by 'GGally':
##   method from   
##   +.gg   ggplot2

# Pre-selección de data, solo variables numericas
correl &lt;- ventas %&gt;%
    select(-TOTAL_VENTAS, 
           -TOTAL_COMPRAS, 
           -COMPRAS_RISE)
```


```r
# Sólo columnas numéricas
ggscatmat(correl)
```
]
.pull-right[
![](3_estadistica_descriptiva_files/figure-html/mc7-1.png)&lt;!-- --&gt;
]
]
]


---

class: middle, center, inverse

&lt;br&gt;
&lt;br&gt;

# Estadística descriptiva
## **CAPÍTULO 3**

&lt;br&gt;
&lt;br&gt;

.center[
### [@MasappEC <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>](https://www.facebook.com/MasappEC/)

### [@Masappdata <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>](https://twitter.com/Masappdata)
]

.pull-right[
Para dudas y preguntas:
<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg> Linda Cabrera O. (+34 924 609 588)
<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg> Fernanda Jurado M. (+593 99 432 3324)
]

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
